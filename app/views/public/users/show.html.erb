<p id ="notice">
    <%= flash[:notice] %>
</p>
<div class="containar px-5 px-sm-0">
  <div class="row mx-5">
    <div class="col-md-3"  style="text-align: center;">


      <%= image_tag @user.get_profile_image(120, 120), class: "mt-3 rounded-circle"; %>
      <img src="<%= asset_path('divider-2461548_6401.png') %>" alt="画像の説明" class="w-75 d-block mx-auto" >
      <h4><%= @user.name %></h4>
      <p><%= @user.introduction %></p>

      <table class="mx-auto">

          <tr>
              <td>フォロー数: <%= @user.followings.count %> <i class="fa-solid fa-leaf"></i></td>

              <td>フォロワー数: <%= @user.followers.count %></td>
       　  </tr>
       　  <tr>
              <th>follows</th>
              <th>followers</th>
          </tr>
          <tr class="taxt-center">

              <th><%= link_to @user.followings.count, user_followings_path(@user) %></th>
              <th><%= link_to @user.followers.count, user_followers_path(@user) %></th>
          </tr>

      </table>
       <img src="<%= asset_path('divider-2461548_64012.png') %>" alt="画像の説明" class="w-75  d-block mx-auto">

       <% if current_user.present? %> 
          <% if current_user != @user %>
            <% if current_user.following?(@user) %>
              <%= link_to "フォロー外す", user_relationships_path(@user.id), method: :delete, class: "btn btn-info" %>
            <% else %>
              <%= link_to "フォローする", user_relationships_path(@user.id), method: :post, class: "btn btn-success" %>
            <% end %>
          <% end %>
       <% end %> 


      <% if @user == current_user %>
        <p><%= link_to " プロフィール編集 ", edit_user_path(@user), class: "btn btn-sm btn-outline-secondary" %></p>
        
         <li>
             <%= link_to new_post_path, class: "btn btn-sm btn-outline-secondary p-3" do %>
                 <i class="fa-solid fa-pen"></i> 投稿をする
             <% end %>
         </li>
        
      <% end %>
    </div>

     <div class="col-md-8 offset-md-1">
         <h4>投稿一覧</h4>
         <div class="border-bottom mt-4 mb-4"></div>
              <div class="table table-inverse taxt-wrap" style="word-wrap: break-word;">


                        <% @posts.each do |post| %>
                            <div>
                                <% if post.get_image.present? %>
                                       <% post.get_image.each do |image| %>

                                            <%= image_tag url_for(image), size: "200x200" %>


                                            <%= link_to post_path(post.id) do %>

                                                <h4> <%= post.caption %></h4>
                                            <% end %>
                                            <p>ショップ名: <%= post.shop_name %></p>
                                            <p>投稿日時: <%= post.created_at.strftime('%Y/%m/%d') %></p>
                                            <p>
                                               <% if post.favorited_by?(current_user) %>
                                                     <%= link_to post_favorite_path(post), method: :delete do %>
                                                         <i class="fa-solid fa-thumbs-up"></i><%= post.favorites.count %> いいね
                                                     <% end %>
                                               <% else %>
                                                     <%= link_to post_favorite_path(post), method: :post do %>
                                                         <i class="fa-regular fa-thumbs-up"></i> <%= post.favorites.count %> いいね
                                                     <% end %>
                                               <% end %>
                                            </p>
                                            <p><%= link_to "#{post.post_comments.count} コメント", post_path(post.id) %></p>
                                            <div class="border-bottom mt-4 mb-4">

                                              <% if post.user == current_user %>
                                              <table>
                                                <tr>
     　                                          <td><%= link_to "Edit", edit_post_path(post), class: "btn btn-sm btn-success" %></td>
      　                                         <td><%= link_to "Destroy", post_path(post), class: "btn btn-sm btn-danger", method: :delete, "data-confirm" => "本当に消しますか?" %></td>
      　                                         </tr>
                                              </table>
    　                                         <% end %>
    　                                      </div>
                                       <% end %>
                                <% else %>
                                       <%= link_to post_path(post.id) do %>

                                           <h4><%= post.caption %></h4>
                                       <% end %>
                                       <p>ショップ名: <%= post.shop_name %></p>
                                       <p>投稿日時: <%= post.created_at.strftime('%Y/%m/%d') %></p>
                                       <p>
                                           <% if post.favorited_by?(current_user) %>
                                               <%= link_to post_favorite_path(post), method: :delete do %>
                                                   <i class="fa-solid fa-thumbs-up"></i><%= post.favorites.count %> いいね
                                           <% end %>
                <% else %>
                  <%= link_to post_favorite_path(post), method: :post do %>
                    <i class="fa-regular fa-thumbs-up"></i> <%= post.favorites.count %> いいね
                  <% end %>
                <% end %>
              </p>
                                       <p><%= link_to "#{post.post_comments.count} コメント", post_path(post.id) %></p>
                                       <div class="border-bottom mt-4 mb-4 pb-md-3">
                                         <% if post.user == current_user %>
                                            <table>
                                                <tr>
     　                                          <td><%= link_to "Edit", edit_post_path(post), class: "btn btn-sm btn-success" %></td>
      　                                         <td><%= link_to "Destroy", post_path(post), class: "btn btn-sm btn-danger", method: :delete, "data-confirm" => "本当に消しますか?" %></td>
      　                                         </tr>
                                            </table>
                                         <% end %>
                                       </div>

                                <% end %>

                            </div>
                        <% end %>
                         <%= paginate @posts %>

              </div>
     </div>
  </div>
</div>